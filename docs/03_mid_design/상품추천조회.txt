sequenceDiagram
    actor User
    participant Web_Server as 웹 서버
    participant Facade as 퍼사드
    participant Crawler as 크롤링&스크래핑
    participant AI_Analyzer as AI 분석
    participant Persistence as 데이터베이스

    User->>Web_Server: 1. 추천 상품 조회 요청 (원본 분석 결과 ID)
    note right of User: '검색' 후 '추천상품' 버튼 클릭 시에만

    Web_Server->>Facade: 2. 추천 상품 생성 및 분석 요청 (원본 분석 결과 ID)

    

    loop 각 유사 상품 URL에 대해 반복
        Facade->>Crawler: 3. 크롤링&스크래핑 요청 (유사 상품 URL)
        Crawler-->>Facade: 4. 크롤링된 결과 반환

        Facade->>AI_Analyzer: 5. 키워드 기반 분석/요약 요청 (크롤링 결과)
        AI_Analyzer-->>Facade: 6. 분석/요약 결과 반환

        Facade->>Persistence: 7. (선택) 추천 상품의 분석 결과 임시 저장
        note right of Persistence: 추천된 상품을<br>'저장'하기 위한 임시저장<br>실제 저장은 '저장' 에서 수행
    end

    Facade-->>Web_Server: 9. 최종 추천 상품 목록 (분석 결과 포함) 반환
    Web_Server-->>User: 10. 추천 상품 목록 출력